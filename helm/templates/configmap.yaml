apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-config
  namespace: {{ .Release.Namespace | default "default" }}
  labels:
    {{- include "app.labels" . | nindent 4 }}
data:
  application.properties: |-
    # server properties
    server.port=10001

    # spring properties
    spring.application.name=commonservice
    spring.banner.location=classpath:application-banner.txt

    ## datasource properties
    spring.datasource.url=jdbc:mysql://localhost:3306/${DB_NAME}?useSSL=false&allowPublicKeyRetrieval=true&serverTimeZone=UTC
    spring.datasource.username=${DB_USER}
    spring.datasource.password=${DB_PASS}
    spring.datasource.hikari.schema=${DB_NAME}
    
    ## hibernate properties
    spring.jpa.show-sql=true
    spring.jpa.properties.hibernate.format_sql=true
    
    ## flyway properties
    spring.flyway.enabled=false
    spring.flyway.locations=classpath:db
    spring.flyway.validate-on-migrate=true
    spring.flyway.default-schema=${DB_NAME}
